<!DOCTYPE html> 
<html> 
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>all keys for loop</title>

    <style type="text/css">
      #check{
        background-color: red;
      }

      #check2{
        background-color: yellow;
      }
    </style>

	</head>

<body> 
<!-- Image Map Generated by http://www.image-map.net/ -->
<img src="images/piano.jpg" usemap="#image-map">

<map name="image-map">
    <area target="_self" alt="c1" title="c1"  coords="3,121,3,271,44,271,43,211,31,211,31,122" shape="poly" onclick= "playPause(c1)">
    <area target="_self" alt="c_1" title="c_1" coords="33,123,33,209,55,209,55,123" shape="poly" onclick= "playPause(c_1)">
    <area target="_self" alt="d1" title="d1"  coords="55,121,56,211,47,211,47,271,86,269,85,212,75,211,74,121" shape="poly" onclick= "playPause(d1)">
    <area target="_self" alt="d_1" title="d_1" coords="76,121,76,208,98,209,98,121" shape="poly" onclick= "playPause(d_1)">
    <area target="_self" alt="e1" title="e1"  coords="99,121,99,210,89,211,89,270,129,270,129,122" shape="poly"onclick= "playPause(e1)">
    <area target="_self" alt="f1" title="f1"  coords="131,123,132,271,172,271,173,212,158,213,159,119" shape="poly" onclick= "playPause(f1)">
    <area target="_self" alt="f_1" title="f_1"  coords="162,121,162,210,184,210,185,122" shape="poly" onclick= "playPause(f_1)">
    <area target="_self" alt="g1" title="g1"  coords="187,121,187,212,175,212,175,271,215,271,217,211,204,211,205,121" shape="poly" onclick="playPause(g1)">
    <area target="_self" alt="g_1" title="g_1"  coords="205,122,206,209,228,208,229,123" shape="poly" onclick= "playPause(g_1)">
    <area target="_self" alt="a1" title="a1"  coords="230,121,229,211,218,211,218,273,258,271,258,213,247,211,245,120" shape="poly" onclick="playPause(a1)">
    <area target="_self" alt="a_1" title="a_1"  coords="247,121,247,209,270,209,271,121" shape="poly" onclick= "playPause(a_1)">
    <area target="_self" alt="b1" title="b1"  coords="272,121,271,213,262,212,261,270,301,272,301,122" shape="poly" onclick= "playPause(b1)">
    <area target="_self" alt="c2" title="c2"  coords="305,121,305,269,344,272,345,212,333,211,331,123" shape="poly" onclick= "playPause(c2)">
    <area target="_self" alt="c_2" title="c_2"  coords="333,120,331,209,357,209,355,118" shape="poly" onclick= "playPause(c_2)">
    <area target="_self" alt="d2" title="d2"  coords="357,121,357,211,347,211,347,270,389,271,389,212,377,210,376,122" shape="poly" onclick= "playPause(d2)">
    <area target="_self" alt="d_2" title="d_2"  coords="375,121,374,209,400,209,400,121" shape="poly" onclick= "playPause(d_2)">
    <area target="_self" alt="e" title="e" coords="402,122,401,211,392,213,391,272,431,269,432,123" shape="poly" onclick= "playPause(e2)">
    <area target="_self" alt="f" title="f" coords="433,119,433,271,473,272,474,121" shape="poly" onclick= "playPause(f2)">
</map>

<div id="container">
</div> 

<button type="button" value="false" id="check" onclick="change(this)" >half-step off</button>

<button type="button" value="false" id="check2" onclick="change(this)" >vibrato off</button>

<script> 
let notes = ["c1","c_1", "d1", "d_1","e1", "f1","f_1","g1","g_1","a1","a_1","b1","c2","c_2","d2","d_2","e2","f2"]
// let myNote_IDs = [];
let sound_folder = 'cello'
let sound = 0;
var i; 
function assignNotes(folder){
  // "use strict";
  for(i = 0; i<notes.length; i++){
    // ternary statement: something that evaluates to true or false ? if true, do this : if false, do this
    // tl;dr: if ? then : else
    console.log('the notes[i] getElementById evaluates to ', document.getElementById(notes[i]));
    const note = document.getElementById(notes[i]) ? document.getElementById(notes[i]) : document.createElement("audio"); 
    //if there is no note for this item, make one otherwise get its id
    console.log('note', note)
    const container = document.getElementById('container');
    const source = note.children.length == 0 ? document.createElement("source") : note.children[0];
      
    if (note.children.length == 0) {
        note.appendChild(source);
        container.appendChild(note);
    }
    note.setAttribute('id', notes[i]);
    source.setAttribute('src', 'audio/' + folder  + '/' + i + '.mp3');
    source.setAttribute('type', 'audio/mpeg');
//    myNote_IDs = myNote_IDs.concat(note);
//    console.log('the note[i] in the loop is ', note);
  }
}

assignNotes(sound_folder);
//console.log('myNotes are ', myNote_IDs);

function playPause(key){
    console.log('the key is ', key)
    // key is the <audio> tag, so we want to get the source tag
    let source = key.children[0];
    // all we need is the src attribute, string that links to the file
    let file = source.getAttribute('src');
    // force javascript to load the new link
    let audio = new Audio(file);
    audio.load()
    if (key.paused) 
      audio.play(); 
    else 
      audio.pause(); 
}

// refactor by creating an additional function that each scenario calls
function change(button){
    // console.log('button: ', button)
    let clicked = button.getAttribute('id')
    let input = document.getElementById("check")
    let inputValue = input.getAttribute('value')
    let input2 = document.getElementById("check2")
    let input2Value = input2.getAttribute('value')
    // console.log('input value: ', inputValue)
    if (clicked === "check") {
      if (inputValue === 'false') {
        refactor('Green', 'half-step on', 'true', 'check');
        } else {
        refactor('Red', 'half-step off', 'false', 'check');
      }
    }
    if (clicked === "check2") {
      if (input2Value === 'false' ) {
        refactor('Purple', 'vibrato on', 'true', 'check2');
        } else {
        refactor('Yellow', 'vibrato off', 'false', 'check2');
      }
    }    
    //this section looks for both buttons being on
    if (inputValue === 'true' && input2Value === 'true') {
        sound = 4;
        sound_folder = soundcheck(sound);
        console.log('sound folder: ', sound_folder)
        assignNotes(sound_folder) 
    }
    console.log("input value 1 and 2", inputValue, input2Value)
}

function refactor(btn_color, label, tf, id){
    if (tf === 'false') {
        document.getElementById(id).style.backgroundColor = btn_color; //on
        document.getElementById(id).innerHTML = label;
        inputValue = 'true'; 
        input.setAttribute('value',inputValue)
        sound = 2;
        // soundcheck(sound);
        sound_folder = soundcheck(sound);
        // console.log('sound folder: ', sound_folder + ' sound: ', sound)
        assignNotes(sound_folder)

        } else {

        document.getElementById(id).style.backgroundColor = btn_color; //off
        document.getElementById(id).innerHTML = label;
        inputValue = 'false'; 
        input.setAttribute('value',inputValue)
        sound = 1;
        // soundcheck(sound);
        // console.log('change button sound was on now off - red', sound)
        sound_folder = soundcheck(sound);
        // console.log('sound folder: ', sound_folder + ' sound: ', sound)
        assignNotes(sound_folder)
      }

}
   

function soundcheck(sound){
    console.log('sound: ', sound)
  
switch (sound){
  case 1: 
    return 'cello';
  case 2:
    // sound = 1;
    return 'piano'
    // break;
  case 3: 
    return 'cellos3';
  case 4: 
    return 'cellos6';
  default: 
    sound = 0; 


  }
  console.log('the sound value is ', sound);
}




</script> 
</body> 
</html>
